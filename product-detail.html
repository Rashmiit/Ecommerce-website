<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>product page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="header">
        <h1><a href="home.html">Ecommerce</a></h1>
        <ul class="nav">
            <li><a href="home.html">Home</a></li>
            <li><a href="product.html">Products</a></li>
            <li><a href="about us.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        <div class="btn"
            <a href="login.html">
            <button type="button" class="btn btn-light border border-dark">
              <i class="fa-solid fa-right-to-bracket"></i> Login
            </button>
            </a>
            <a href="register.html">
            <button type="button" class="btn btn-light border border-dark">
              <i class="fa-solid fa-user-plus"></i> Register
            </button>
            </a>
            <a href="cart.html">
            <button type="button" class="btn btn-light border border-dark">
              <i class="fa-solid fa-cart-shopping"></i> Cart (0)
            </button>
            </a>
          </div>
    </div>
    <div><br>
    <div class="container mt-5"style="padding:70px;">
        <div class="row">
            <div class="col-md-6">
                <img id="productImage" src="" class="imge">
            </div>
            <div class="product col-md-6">
                <h1 id="productCategory"></h1>
                <h2 id="productName"></h2>
                <p id="productRating"> <i class="fa fa-star" style="color:black;"></i></p>
                <h3 id="productPrice"></h3>
                <p id="productDescription"></p>
                <button>Add to cart</button>
                <button>Go to cart</button>
            </div>
        </div>
    </div>
    <div class="slider">
        <h1>You may also Like</h1>
    </div>
    <div class ="row p-4 justify-content-center" id="imgs">
    </div>
    <script>
        const params = new URLSearchParams(window.location.search);
        const productId = params.get('id');
        fetch(`https://fakestoreapi.com/products/${productId}`)
            .then(response => response.json())
            .then(product => {
                document.getElementById('productCategory').innerText=product.category
                document.getElementById('productImage').src = product.image;
                document.getElementById('productName').innerText = product.title;
                document.getElementById('productRating').innerText=`${product.rating.rate}`
                document.getElementById('productPrice').innerText = `$${product.price}`
                document.getElementById('productDescription').innerText = product.description;
            })
            let products=[];

    //fetch product
    function fetchProducts(){
      fetch("https://fakestoreapi.com/products")
    .then(res=>res.json())
    .then(data=>{
      products=data
      displayProducts(products)
    })
  }
    //fetch and filter function
    function displayProducts(productList){
      const container= document.getElementById("imgs");
      container.innerHTML=""        //clears any existing container
      productList.forEach(product => {
        const card = document.createElement("div");
        card.className ="col-md-4 p-2 text-center";
        card.innerHTML=`
            <div class="card h-150">
              <img src="${product.image}" alt="product image" style="margin:30px;height:300px">
              <div class="cards">
                <p style="font-weight:bold">${product.title.length>10?product.title.substring(0,11).concat("..."):product.title}</p>
                <p style="text-align:center">${product.description.length>20?product.description.substring(0,90).concat("..."):product.description}</p><hr>
                <p style="text-align:center">$${product.price}</p><hr>
              </div>
              <div class="bnt p-3">
                <div class=bnt1>
                <a href='product-detail.html?id=${product.id}'>Details</a>
                <a href='cart.html?id=${product.id}'>Add to Cart</a>
               </div>
               </div>
              </div>`
            container.appendChild(card);
      })
    }
   //filter function
    function filterProducts(category) {
        if (category === "all") {
          displayProducts(products);
        } else {
          const filtered = products.filter(product => product.category === category);
          displayProducts(filtered);
        }
      }
      window.onload = fetchProducts;
           
    </script>
</body>
</html>  